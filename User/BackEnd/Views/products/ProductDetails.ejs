<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title><%= product.name %> | PitchWear</title>

  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#fbfaf7] text-gray-800">

<!-- HEADER -->
<header class="border-b bg-[#fbfaf7]">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 py-5 flex justify-between items-center">
    <a href="/home" class="font-bold text-lg">PitchWear</a>

    <nav class="hidden md:flex gap-8 text-sm">
      <a href="/home">Home</a>
      <a href="/shop" class="font-medium">Shop</a>
      <a href="/about">About</a>
      <a href="/contact">Contact</a>
    </nav>

    <div class="flex gap-4 text-lg">
      <a href="/wishlist">â™¡</a>
      <a href="/cart">ðŸ›’</a>
      <a href="/account">ðŸ‘¤</a>
    </div>
  </div>
</header>

<main class="max-w-6xl mx-auto px-4 sm:px-6 py-10">

<!-- BREADCRUMB -->
<p class="text-sm text-gray-500 mb-6">
  Home / Shop / <%= product.team %>
</p>

<!-- PRODUCT SECTION -->
<section class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">

  <!-- LEFT: IMAGES -->
  <div>
    <div class="bg-[#f3f1e7] rounded-2xl p-4 sm:p-8 flex justify-center">
      <img
        src="<%= product.images[0] %>"
        class="h-[260px] sm:h-[320px] md:h-[380px] object-contain cursor-zoom-in"
        onclick="openImageZoom('<%= product.images[0] %>')"
      />
    </div>

    <div class="flex gap-3 mt-4 justify-center md:justify-start flex-wrap">
      <% product.images.forEach((img) => { %>
        <img
          src="<%= img %>"
          class="w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-lg border cursor-pointer"
          onclick="openImageZoom('<%= img %>')"
        />
      <% }) %>
    </div>
  </div>

  <!-- RIGHT: DETAILS -->
  <div>

    <span class="inline-block bg-green-600 text-white text-xs px-3 py-1 rounded-full mb-3">
      <%= product.status %>
    </span>

    <h1 class="text-2xl sm:text-3xl font-semibold mb-2">
      <%= product.name %>
    </h1>

    <p class="text-sm text-gray-500 mb-4">
      <%= product.team %> â€¢ <%= product.kitType %> â€¢ <%= product.type %>
    </p>

    <div class="flex flex-wrap items-center gap-3 mb-4">
      <span id="priceText" class="text-2xl font-bold">
        â‚¹<%= product.displayPrice %>
      </span>
      <span class="text-green-700 text-sm">
        In Stock: <%= product.totalStock %>
      </span>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm mb-6">
      <p><b>Sleeve:</b> <%= product.kitType %></p>
      <p><b>Kit Type:</b> <%= product.type %></p>
    </div>

    <!-- SIZE -->
    <div class="mb-6">
      <p class="text-sm font-medium mb-2">Select Size</p>

      <div class="flex gap-3 flex-wrap">
        <% product.variants.forEach((v) => { %>
          <button
            type="button"
            data-price="<%= v.price %>"
            class="
              size-btn px-4 py-2 rounded-lg text-sm border transition
              <%= v.stock > 0
                ? 'bg-white shadow-md border-green-600 text-gray-800'
                : 'bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed'
              %>
            "
            <%= v.stock > 0 ? '' : 'disabled' %>
          >
            <%= v.size %>
          </button>
        <% }) %>
      </div>
    </div>

    <!-- QUANTITY -->
    <div class="mb-6">
      <p class="text-sm font-medium mb-2">Quantity</p>
      <div class="flex items-center gap-4 border rounded-lg w-fit px-4 py-2">
        <button>-</button>
        <span>1</span>
        <button>+</button>
      </div>
    </div>

    <!-- ACTIONS -->
    <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-8">
      <button class="bg-[#5f7550] text-white px-8 py-3 rounded-lg w-full sm:w-auto">
        Add to Cart
      </button>
      <button class="border px-5 py-3 rounded-lg w-full sm:w-auto">
        â™¡ Wishlist
      </button>
    </div>

    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-center text-xs text-gray-600">
      <div>âœ” Official Replica</div>
      <div>âœ” Premium Fabric</div>
      <div>âœ” Secure Payments</div>
      <div>âœ” Easy Returns</div>
    </div>

    <div class="bg-white border rounded-lg p-4 mt-6 text-sm">
      <b>Care Instructions</b>
      <p class="text-gray-500 mt-1">
        Machine wash cold, do not iron print, tumble dry low.
      </p>
    </div>

  </div>
</section>

</main>

<!-- IMAGE ZOOM MODAL -->
<div
  id="imageZoomModal"
  class="fixed inset-0 bg-black bg-opacity-80 hidden z-50 flex items-center justify-center px-4"
>
  <button
    onclick="closeImageZoom()"
    class="absolute top-4 right-4 sm:top-6 sm:right-6 text-white text-3xl font-bold"
  >
    Ã—
  </button>

  <div class="absolute bottom-4 sm:bottom-6 flex gap-4">
    <button onclick="zoomOut()" class="bg-white px-4 py-2 rounded">âˆ’</button>
    <button onclick="zoomIn()" class="bg-white px-4 py-2 rounded">+</button>
  </div>

  <img
    id="zoomImage"
    src=""
    class="max-h-[80vh] sm:max-h-[90vh] max-w-full transition-transform duration-200"
    style="transform: scale(1)"
  />
</div>

<!-- EXISTING SIZE SCRIPT -->
<script>
  const priceText = document.getElementById("priceText");
  const sizeButtons = document.querySelectorAll(".size-btn");

  sizeButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      sizeButtons.forEach(b =>
        b.classList.remove("ring-2", "ring-green-600")
      );
      btn.classList.add("ring-2", "ring-green-600");

      const price = btn.dataset.price;
      if (price && Number(price) > 0) {
        priceText.innerText = "â‚¹" + price;
      }
    });
  });
</script>

<!-- IMAGE ZOOM SCRIPT -->
<script>
  let currentScale = 1;

  function openImageZoom(src) {
    const modal = document.getElementById("imageZoomModal");
    const img = document.getElementById("zoomImage");

    currentScale = 1;
    img.style.transform = "scale(1)";
    img.src = src;

    modal.classList.remove("hidden");
    document.body.style.overflow = "hidden";
  }

  function closeImageZoom() {
    document.getElementById("imageZoomModal").classList.add("hidden");
    document.body.style.overflow = "";
  }

  function zoomIn() {
    currentScale += 0.2;
    document.getElementById("zoomImage").style.transform =
      `scale(${currentScale})`;
  }

  function zoomOut() {
    if (currentScale > 1) {
      currentScale -= 0.2;
      document.getElementById("zoomImage").style.transform =
        `scale(${currentScale})`;
    }
  }
</script>

</body>
</html>
