<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Verify Email OTP | Vestra</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#7da77b',
            bgLight: '#faf9f6'
          }
        }
      }
    }
  </script>
</head>

<body class="bg-bgLight text-gray-800">

<!-- ================= HEADER ================= -->
<header class="bg-[#f5f6df] px-16 py-4 flex justify-between items-center">
  <h1 class="text-lg font-semibold">VESTRA</h1>

  <nav class="flex items-center gap-10 text-sm">
    <a href="/Home" class="hover:text-primary">Home</a>
    <a href="#" class="hover:text-primary">Shop</a>
    <a href="#" class="hover:text-primary">About</a>
    <a href="#" class="hover:text-primary">Contact</a>

    <img
      src="<%= user?.profileImage || '/images/user.png' %>"
      class="w-8 h-8 rounded-full object-cover border"
      alt="User"
    />
  </nav>
</header>

<!-- ================= MAIN ================= -->
<main class="px-16 py-14 flex justify-center">

  <div class="bg-white w-full max-w-xl rounded-xl p-10">

    <p class="text-sm text-gray-500 mb-2">My Account / Verify Email</p>

    <h2 class="text-2xl font-semibold mb-2">Verify Email OTP</h2>
    <p class="text-sm text-gray-500 mb-8">
      Enter the 6-digit OTP sent to your new email address.
    </p>

    <% if (error) { %>
      <p class="text-red-500 text-sm mb-4"><%= error %></p>
    <% } %>

    <form action="/profile/verify-email-otp" method="POST">

      <!-- OTP INPUTS -->
      <div class="flex justify-between mb-8">
        <% for(let i = 0; i < 6; i++) { %>
          <input
            type="text"
            name="otp[]"
            maxlength="1"
            required
            class="otp-input w-12 h-14 border rounded-md text-center text-lg focus:outline-none focus:border-primary"
          />
        <% } %>
      </div>

      <!-- ACTIONS -->
      <div class="flex justify-end gap-4">
        <a
          href="/profile/change-email"
          class="px-6 py-2 bg-gray-200 rounded-md text-sm"
        >
          Back
        </a>

        <button
          type="submit"
          class="px-6 py-2 bg-primary text-white rounded-md text-sm hover:opacity-90"
        >
          Verify â†’
        </button>
      </div>

    </form>

  </div>

</main>

<!-- ================= OTP AUTO-FOCUS SCRIPT ================= -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const inputs = document.querySelectorAll(".otp-input");

    inputs.forEach((input, index) => {

      input.addEventListener("input", () => {
        if (input.value && index < inputs.length - 1) {
          inputs[index + 1].focus();
        }
      });

      input.addEventListener("keydown", (e) => {
        if (e.key === "Backspace" && !input.value && index > 0) {
          inputs[index - 1].focus();
        }
      });

    });
  });
</script>

</body>
</html>
